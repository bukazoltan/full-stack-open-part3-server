{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/MessagePanel.js","App.js","index.js"],"names":["BASEURL","axios","get","then","response","data","newObject","post","id","delete","put","Filter","onChange","value","type","PersonForm","nameChange","numberChange","nameValue","numberValue","handleClick","onClick","Person","name","number","e","Persons","persons","map","person","key","positiveMessage","color","width","background","margin","padding","border","borderRadius","negativeMessage","MessagePanel","message","isPositive","style","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setFilter","setMessage","useEffect","personService","updateMessage","time","setTimeout","target","preventDefault","length","some","window","confirm","duplicate","find","duplicateObject","console","log","elementIndex","findIndex","element","personsCopy","catch","error","personList","newPerson","concat","list","item","toLowerCase","includes","filtering","newArray","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5db06bfb.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst BASEURL = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(BASEURL);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(BASEURL, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deleteItem = (id) => {\r\n  const request = axios.delete(`${BASEURL}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst updateItem = (id, newObject) => {\r\n  const request = axios.put(`${BASEURL}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  deleteItem,\r\n  updateItem,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ onChange, value }) => {\r\n  return (\r\n    <div>\r\n      filter shown with{\" \"}\r\n      <input type=\"text\" onChange={onChange} value={value}></input>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  nameChange,\r\n  numberChange,\r\n  nameValue,\r\n  numberValue,\r\n  handleClick,\r\n}) => {\r\n  return (\r\n    <form>\r\n      <div>\r\n        name: <input type=\"text\" onChange={nameChange} value={nameValue} />\r\n      </div>\r\n      <div>\r\n        number: <input type=\"tel\" onChange={numberChange} value={numberValue} />\r\n      </div>\r\n      <div>\r\n        <button onClick={handleClick} type=\"submit\">\r\n          add\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ name, number, id, handleClick }) => {\r\n  return (\r\n    <p>\r\n      {name} {number}{\" \"}\r\n      <button onClick={(e) => handleClick(e, id, name)}>delete</button>\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst Persons = ({ persons, handleClick }) => {\r\n  return persons.map((person) => (\r\n    <Person\r\n      id={person.id}\r\n      key={person.id}\r\n      name={person.name}\r\n      number={person.number}\r\n      handleClick={handleClick}\r\n    />\r\n  ));\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst positiveMessage = {\r\n  color: \"green\",\r\n  width: \"95%\",\r\n  background: \"whitesmoke\",\r\n  margin: \"2 auto\",\r\n  padding: \"5px\",\r\n  border: \"green 3px solid\",\r\n  borderRadius: 5,\r\n};\r\n\r\nconst negativeMessage = {\r\n  ...positiveMessage,\r\n  color: \"red\",\r\n  border: \"red 3px solid\",\r\n};\r\n\r\nconst MessagePanel = ({ message }) => {\r\n  if (message === null) return null;\r\n  if (message.isPositive)\r\n    return <h2 style={positiveMessage}>{message.message}</h2>;\r\n  return <h2 style={negativeMessage}>{message.message}</h2>;\r\n};\r\n\r\nexport default MessagePanel;\r\n","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\n\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport MessagePanel from \"./components/MessagePanel\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [message, setMessage] = useState(null);\n\n  const hook = () => {\n    personService.getAll().then((response) => setPersons(response));\n  };\n\n  useEffect(hook, []);\n\n  const updateMessage = (message, time, isPositive) => {\n    setMessage({ message, isPositive });\n    setTimeout(() => setMessage(null), time);\n  };\n\n  const handleAddClick = (e) => {\n    e.preventDefault();\n    if (newName.length === 0) return;\n    if (persons.some((person) => person.name === newName)) {\n      if (\n        !window.confirm(\n          `${newName} is already in the phonebook. Replace the old number with the new one?`\n        )\n      ) {\n        return;\n      }\n      let duplicate = persons.find((person) => person.name === newName);\n      let duplicateObject = {\n        name: newName,\n        number: newNumber,\n        id: duplicate.id,\n      };\n      console.log(duplicateObject);\n      personService\n        .updateItem(duplicate.id, duplicateObject)\n        .then((response) => {\n          const elementIndex = persons.findIndex(\n            (element) => element.id === duplicate.id\n          );\n          const personsCopy = [...persons];\n          personsCopy[elementIndex] = duplicateObject;\n          setPersons(personsCopy);\n          updateMessage(\n            `The number  of ${response.name} has been replaced.`,\n            2000,\n            true\n          );\n        })\n        .catch((error) => {\n          // this is the way to access the error message\n          updateMessage(error.response.data, 2000, false);\n        });\n      return;\n    }\n    const personList = persons;\n    let newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    personService\n      .create(newPerson)\n      .then((response) => setPersons(personList.concat(newPerson)))\n      .catch((error) => {\n        // this is the way to access the error message\n        updateMessage(error.response.data, 2000, false);\n      })\n      .then(\n        updateMessage(`${newName} has been added to the list.`, 2000, true)\n      );\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleDeleteClick = (e, id, name) => {\n    e.preventDefault();\n    personService\n      .deleteItem(id)\n      .then((response) => {\n        updateMessage(`${name} has been deleted from the list.`, 2000, true);\n        let newArray = persons.filter((person) => person.id !== id);\n        setPersons(newArray);\n        console.log(response);\n      })\n      .catch((error) =>\n        updateMessage(\n          `The entry of \"${name}\" has been already deleted`,\n          2000,\n          false\n        )\n      );\n  };\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilterChange = (e) => {\n    setFilter(e.target.value);\n  };\n\n  const filtering = (filter, list) => {\n    return list.filter((item) =>\n      item.name.toLowerCase().includes(filter.toLowerCase())\n    );\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <MessagePanel message={message} />\n      <Filter onChange={handleFilterChange} value={filter} />\n      <h2>Add a new</h2>\n      <PersonForm\n        nameChange={handleNameChange}\n        numberChange={handleNumberChange}\n        nameValue={newName}\n        numberValue={newNumber}\n        handleClick={handleAddClick}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={filtering(filter, persons)}\n        handleClick={handleDeleteClick}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}